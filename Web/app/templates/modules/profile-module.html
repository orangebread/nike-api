<div class="profile-view">
	<div class="column-30-70">
		<div class="column">
			<div class="profile-info">
				<div class="stats">
					<p class="name"><span>Username:</span> {{userInfo.display_name}}</p>
					<p class="company-name"><span>Email:</span> {{userInfo.email}}</p>
					<p class="company-name" ng-if="userInfo.merchant_status != null"><span>Merchant Status:</span> {{userInfo.merchant_status}}</p>
					<button class="btn" ng-if="userInfo.merchant_status != null" ng-click="getMerchantDetails()">Financial Details</button>
					<br />
					<br />
					<br />
					<button class="btn" ng-click="logout()">Logout</button>
				</div>
			</div>
		</div>
		<div class="column">
			<div class="wrapper">

				<h2 style="margin-top: 0px;">Posted Jobs</h2>
  
			  <div class="custom-table">
			    
			    <div class="custom-row header">
			      <div class="custom-cell">
			        Title
			      </div>
			      <div class="custom-cell">
			        Date
			      </div>
			      <div class="custom-cell">
			        Budget
			      </div>
			      <div class="custom-cell">
			        Applications
			      </div>
			      <div class="custom-cell">
			        Status
			      </div>
			      <div class="custom-cell">
			        Workflow
			      </div>
			    </div>
			    
			    <div class="custom-row" ng-repeat="job in jobsPosted | orderBy: 'title'">
			      <div class="custom-cell link">
			        <a ng-click="goToJob(job.id, job.user_id, job.title)">{{job.title}}</a>
			      </div>
			      <div class="custom-cell">
			        {{job.expires_at | date}}
			      </div>
			      <div class="custom-cell">
			        {{job.budget | currency}}
			      </div>
			      <div class="custom-cell">
			      	<button class="btn" ng-click="getApplicationsForJob(job.id, job.title)">View: {{job.applicationCount}}</button>
			      </div>
			      <div class="custom-cell">
			      	<span ng-if="job.status_id == 1">Pending</span>
			        <span ng-if="job.status_id == 2">In Progress</span>
			        <span ng-if="job.status_id == 3">Ready For Review</span>
			        <span ng-if="job.status_id == 4">In Review</span>
			        <span ng-if="job.status_id == 5">Payment Released!</span>
			        <span ng-if="job.status_id == 6">Completed</span>
			      </div>
			      <div class="custom-cell">
			      	<button class="btn" ng-if="job.status_id == 3" ng-click="markAsInReview(job)">Put in Review</button>
			      	<button class="btn" ng-if="job.status_id == 4" ng-click="markAsComplete(job)">Mark Complete</button>
			      </div>
			    </div>
			    
			  </div>
			  <div class="no-row-table" ng-show="jobsPosted.length == 0">
			  	<p>You have no posted jobs.</p>
			  </div>

				
			  <div class="applications-for-selected-job" ng-if="view.showApplications">
			  	<div class="title">
			  		<h3>Job: {{view.jobTitle}}</h3>
			  	</div>
			  	<div class="applications">
			    	<div class="application-item" ng-repeat="application in view.fetchedApplications | orderBy: 'display_name'">
			    		<div class="username">
			    			<p>{{application.display_name}}</p>
			    		</div>
			    		<div class="bid">
			    			<p><span>Bid</span>: {{application.bid_amount | currency}}</p>
			    		</div>
			    		<div class="status">
			    			<p><span>Status:</span> {{application.application_status}}</p>
			    		</div>
			    		<div class="description">
							<p> {{application.description}}</p>
			    		</div>
			    		<div class="buttons" ng-show="application.application_status == 'Applied'">
			    			<button class="btn" ng-click="decide(true, application)">Accept</button>
			    			<button class="btn reject" ng-click="decide(false, application)">Reject</button>
			    		</div>
			    	</div>
		    	</div>
		    </div>

			  <h2 style="margin-top: 0px;">Applications</h2>
			  
			  <div class="custom-table">
			    
			    <div class="custom-row header green">
			      <div class="custom-cell">
			        Job Title
			      </div>
			      <div class="custom-cell">
			        Date
			      </div>
			      <div class="custom-cell">
			        Bid Amount
			      </div>
			      <div class="custom-cell">
			        Job Budget
			      </div>
			      <div class="custom-cell">
			        Status
			      </div>
			      <div class="custom-cell">
			        Workflow
			      </div>
			    </div>
			    
			    <div class="custom-row" ng-repeat="application in applications | orderBy: application.jobTitle">
			      <div class="custom-cell link">
			        <a ng-click="goToJob(application.job_id, application.employer_id)">{{application.jobTitle}}</a>
			      </div>
			      <div class="custom-cell">
			        {{application.expires_at | date}}
			      </div>
			      <div class="custom-cell">
			        {{application.bid_amount | currency}}
			      </div>
			      <div class="custom-cell">
			        {{application.budget | currency}}
			      </div>
			      <div class="custom-cell">
			        <span ng-if="application.status_id == 1">Pending</span>
			        <span ng-if="application.status_id == 2">In Progress</span>
			        <span ng-if="application.status_id == 3">Ready For Review</span>
			        <span ng-if="application.status_id == 4">In Review</span>
			        <span ng-if="application.status_id == 5">Payment Received!</span>
			        <span ng-if="application.status_id == 6">Completed</span>
			        <span ng-if="application.status_id == 7">Offer Rejected</span>
			      </div>
			      <div class="custom-cell">
			      	<button class="btn" ng-if="application.status_id == 2" ng-click="markAsDone(application)">Mark as complete</button>
			      	<!-- <button class="btn" ng-if="application.appstatus_id == 2" ng-click="markPaymentReceived(application.job_id)"></button> -->
			      </div>
			    </div>
			    
			  </div>
			  <div class="no-row-table" ng-show="applications.length == 0">
			  	<p>You have not applied to any jobs.</p>
			  </div>

			  <h2>Transactions</h2>

			  <div class="custom-table">
			    
			    <div class="custom-row header green">
			      <div class="custom-cell">
			        Job Title
			      </div>
			      <div class="custom-cell">
			        Date Sent
			      </div>
			      <div class="custom-cell">
			        Sent To
			      </div>
			      <div class="custom-cell">
			        Amount
			      </div>
			      <div class="custom-cell">
			        Status
			      </div>
			    </div>
			    
			    <div class="custom-row" ng-repeat="transaction in transactions | orderBy: 'jobTitle'">
			      <div class="custom-cell">
			      	{{transaction.jobTitle}}
			      </div>
			      <div class="custom-cell">
			        {{transaction.created_at | date}}
			      </div>
			      <div class="custom-cell">
			        {{transaction.userName}}
			      </div>
			      <div class="custom-cell">
			        {{transaction.amount | currency}}
			      </div>
			      <div class="custom-cell">
			        <span ng-if="transaction.escrowStatus == 'hold_pending'">Pending Escrow</span>
			        <span ng-if="transaction.escrowStatus == 'held'">In Escrow</span>
			        <span ng-if="transaction.escrowStatus == 'release_pending'">Pending Release</span>
			        <span ng-if="transaction.escrowStatus == 'released'">Released</span>
			      </div>
			    </div>
			    
			  </div>
			  <div class="no-row-table" ng-show="transactions.length == 0">
			  	<p>You have no transactions on record.</p>
			  </div>
			  	  
			</div>
		</div>
	</div>
</div>